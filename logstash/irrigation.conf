input {
  http_poller {
    urls => {
      test2 => {
        method => get
        url => "http://192.168.1.20/stats"
        headers => {
          Accept => "application/json"
        }
     }
    }
    request_timeout => 10
    # Supports "cron", "every", "at" and "in" schedules by rufus scheduler
     	
    codec => "json"
    # A hash of request metadata info (timing, response headers, etc.) will be sent here
    # metadata_target => "http_poller_metadata"
  }
}

filter {
  translate {
    field => "[state]"
    destination => "[state_description]"
    dictionary => {
      "0" => "Disable"
      "1" => "Enable"
    }
    fallback => "Unknown"
  }
  translate {
    field => "[status]"
    destination => "[status_description]"
    dictionary => {
      "0" => "Idle"
      "1" => "Starting"
      "2" => "Running"
      "3" => "Stopping"
      "4" => "Boosting"
    }
    fallback => "Unknown"
  }
}

output {
    elasticsearch {
        hosts => "192.168.1.7"
        index => "irrigation-%{+YYYY.MM.dd}"
    }
}